<html lang="en">

<head>
    <title>Charge Summary</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <meta http-equiv="Cache-Control" content="no-store">
    {{> head_script}}
    <script src="/public/js/c_js_chargeSummary.js"></script>
    <script src="/public/autocomplete/jquery.autocomplete.js"></script>
    <link rel="stylesheet" href="/public/autocomplete/jquery.autocomplete.css">

    <meta name="decorator" content="default" />
</head>

<body>
    <form id="searchForm" modelAttribute="hjInfo" action="/chargeSummary/query" method="post"
        class="form-horizontal">
        <form:hidden path="serviceId" value="${fns:getUser().serviceId }" />
        <form:hidden path="feeType" />
        <form:hidden path="feeFlag" />
        <input id="pageNo" name="pageNo" type="hidden" value="${page.pageNo}" />
        <input id="pageSize" name="pageSize" type="hidden" value="${page.pageSize}" />
 <div class="form-group">
    <label for="methodType" class="col-sm-2 control-label">Charge Type</label>
    <div class="col-sm-2">
      <select class="form-control" id="methodType" name="hjInfoList[methodType]">
                    <option value="1" label="dddddd" />
                    <option value="2" label="eeeeee" />
    </select>
    </div>
    <label for="firstDoc" class="col-sm-1 control-label">Doctor</label>
    <div class="col-sm-2">
       <select class="form-control" id="firstDoc" name="hjInfoList[firstDoc]">
                    <option value="1" label="dddddd" />
                    <option value="2" label="eeeeee" />
                </select>
    </div>
     <label for="name" class="col-sm-1 control-label">Patient</label>
    <div class="col-sm-2">
                <input type="text" class="form-control " id="name" name="hjInfoList[name]">
    </div>
  </div>

<div class="form-group">
    <label for="feeDate" class="col-sm-2 control-label">Charge Date</label>
    <div class="col-sm-3">
      <div class='input-group date'>
                <input type='text' class="form-control" id='startDate' name="hjInfoList[startDate]" />
                <span class="input-group-addon">
                    <span class="glyphicon glyphicon-calendar"></span>
                </span>
            </div> 
    </div>
    <label  class="lable-set control-label">to</label>
    <div class="col-sm-3">
      <div class='input-group date'>
                <input type='text' class="form-control" id='endDate' name="hjInfoList[startDate]" />
                <span class="input-group-addon">
                    <span class="glyphicon glyphicon-calendar"></span>
                </span>
            </div> 
    </div>
      <label for="feeName" class="col-sm-1 control-label">feeName</label>
    <div class="col-sm-2">
                <input type="text" class="form-control " id="feeName" name="hjInfoList[feeName]">
    </div>
  </div>

<div class="form-group">
    <label for="flag" class="col-sm-2 control-label">是否欠费</label>
    <div class="col-sm-3">
      <select class="form-control" id="methodType" name="hjInfoList[flag]">
                    <option value="1" label="dddddd" />
                    <option value="2" label="eeeeee" />

                </select>
    </div>
 <input id="btnSubmit" class="btn btn-primary" type="submit" value="查询" />
        </div>

    </form>
     <br />
    <sys:message content="${message}" />

    <table id="treeTable" class="table table-striped table-bordered table-condensed">
        <thead>
            <tr>
                <th>流水号</th>
                <th>患者姓名</th>
                <th>联系方式</th>
                <th>首诊医生</th>
                <th>收费日期</th>
                <th>收费总额</th>
                <th>总收</th>
                <th>找零</th>
                <th>实收</th>
                <th>补收</th>
                <th>欠费</th>
                <th>收费方式</th>
                <th>收费人员</th>
                <shiro:hasPermission name="hj:hjInfo:edit">
                    <th width="100px">操作</th>
                </shiro:hasPermission>
            </tr>
        </thead>
        <tbody>
            {{#each hjInfo}}
            <tr id="{{chargesId}}" pid="0">
                <td>
                    <a href="javascript:;" onclick="treeTableTrtoggle('${hjInfo.chargesId}');">{{chargesId}}</a>
                </td>
                <td>
                    {{name}}
                </td>
                <td>
                    {{tel}}
                </td>
                <td>
                    {{firstDoc}}
                </td>
                <td>
                    <fmt:formatDate value="{{feeDate}}" pattern="yyyy-MM-dd HH:mm:ss" />
                </td>
                <td class="number green">
                    {{allFee}}
                </td>
                <td class="number grey">
                    {{changeFee}}
                </td>
                <td class="number" style="color: #000;">
                    {{inFee}}
                </td>
                <td class="number green">
                    {{patchFee}}
                </td>
                <td class="number grey">
                    {{owemoney}}
                </td>
                <td>
                    {{feeType}}
                </td>
                <td>
                    {{feeName}}
                </td>
                <shiro:hasPermission>
                    <td>
                        <a
                            href="${ctx}/hj/hjInfo/form?chargesId=${hjInfo.chargesId}&&oldChargesId=${hjInfo.chargesId}&&id=${hjInfo.chargesId}&&feeType=${hjInfo.feeType}&&temp2=2"><span
                                style="color:red">补收</span></a></br>
                        <a
                            href="${ctx}/hj/hjInfo/form?chargesId=${hjInfo.chargesId}&&id=${hjInfo.chargesId}&&feeType=${hjInfo.feeType}&&temp2=2">重复收费</a></br>
                        <a
                            href="${ctx}/hj/hjInfo/form?chargesId=${hjInfo.chargesId}&&id=${hjInfo.chargesId}&&feeType=${hjInfo.feeType}&&temp2=1">费用修改</a></br>
                        <a href="${ctx}/hj/hjInfo/delete?chargesId=${hjInfo.chargesId}"
                            onclick="return confirmx('确认要删除该划价收费吗？', this.href)">删除</a>
                    </td>
                </shiro:hasPermission>
            </tr>

            <tr id="1" pId="{{chargesId }}">

                <th>项目类别</th>
                <th colspan="3">项目名称</th>
                <th colspan="2">项目规格</th>
                <th colspan="2">项目数量</th>
                <th>单位</th>
                <th>单价(元)</th>
                <th>单项累计</th>
                <th>分组</th>
            </tr>
            {{#each hjFeeInfoList}}
            <tr id="{{feeId}}" pId="{{chargesId}}">
                <td>
                    {{drugeType}}
                </td>
                <td colspan="3">
                    {{drugsName}}
                </td>
                <td colspan="2">
                    {{drugsSpec}}
                </td>
                <td colspan="2">
                    {{allNum}}
                </td>
                <td>
                    {{drugsUnit}}
                </td>
                <td>
                    {{drugsPrice}}
                </td>
                <td>
                    {{numPrice}}
                </td>
                <td>
                    {{groupId}}
                </td>
            </tr>
            {{/each}}
            {{/each}}
            <tr>
                <td colspan="15" style="text-align: right;width: 8%;">
                    <b>总金额:</b><span class="number">11</span>元&nbsp;&nbsp;
                    <b>实际收入:</b><span class="number">11</span>元&nbsp;&nbsp;
                    <b>欠费金额:</b><span class="number">0</span>元&nbsp;&nbsp;
                </td>
            </tr>
        </tbody>
    </table>

</body>

</html>